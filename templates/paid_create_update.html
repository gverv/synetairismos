<!-- templates/paid_create_update.html -->
{% extends "main.html" %}
{% load static %}

{% block content %}
<div class="container-fluid mt-4">
  {% if form.instance.pk %}
    <h2 style="font-size:1.3rem;">Ενημέρωση Απόδειξης #{{ form.instance.receiptNumber }}</h2>
  {% else %}
    <h2 style="font-size:1.3rem;">Έκδοση Απόδειξης</h2>
  {% endif %}

  <!-- React component -->
  <form method="post" id="receiptForm">
    {% csrf_token %}
    <div id="react-payment-form" data-is-edit="{{ form.instance.pk|yesno:'true,false' }}"></div>
  </form>
</div>

<style>
  @media (max-width: 576px) {
    h2 {
      font-size: 1.1rem !important;
    }
    .container-fluid {
      padding-left: 5px !important;
      padding-right: 5px !important;
    }
    .btn {
      font-size: 0.95rem;
      padding: 0.4rem 0.7rem;
    }
    .mt-2 {
      margin-top: 0.7rem !important;
    }
  }

  textarea#id_notes {
    max-height: 100px;
    min-height: 60px;
  }
</style>

<!-- Hidden inputs for React initial state -->
<input type="hidden" id="react_cost" value="{{ form.cost.value|default:0 }}">
<input type="hidden" id="react_paid" value="{{ form.paid.value|default:0 }}">
<input type="hidden" id="react_collectorFeeRate" value="{{ collectorFeeRate }}">
<input type="hidden" id="react_paymentDate" value="{{ form.paymentDate.value|default:'' }}">
<input type="hidden" id="react_receiver" value="{{ form.receiver.value|default:1 }}">

<!-- React bundle -->
<script src="{% static 'frontend/bundle.js' %}"></script>
{% endblock %}
